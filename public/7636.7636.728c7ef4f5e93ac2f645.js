"use strict";(self.webpackChunkmy_new_custom_application_project=self.webpackChunkmy_new_custom_application_project||[]).push([[7636],{"./src/components/channel-details/index.js":(e,n,o)=>{o.r(n),o.d(n,{default:()=>de});var a=o("./node_modules/@babel/runtime-corejs3/helpers/esm/asyncToGenerator.js"),l=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/values.js"),t=o.n(l),s=o("./node_modules/@babel/runtime-corejs3/regenerator/index.js"),r=o.n(s),i=o("./node_modules/react-intl/lib/src/components/useIntl.js"),d=o("./node_modules/react-router/esm/react-router.js"),c=o("./node_modules/@commercetools-frontend/application-components/dist/commercetools-frontend-application-components.esm.js"),u=o("./node_modules/@commercetools-uikit/notifications/dist/commercetools-uikit-notifications.esm.js"),m=o("./node_modules/@commercetools-uikit/text/dist/commercetools-uikit-text.esm.js"),h=o("./node_modules/@commercetools-uikit/spacings/dist/commercetools-uikit-spacings.esm.js"),p=o("./node_modules/@commercetools-uikit/loading-spinner/dist/commercetools-uikit-loading-spinner.esm.js"),y=o("./node_modules/react/index.js"),f=o("./node_modules/@commercetools-frontend/application-shell-connectors/dist/commercetools-frontend-application-shell-connectors.esm.js"),v=o("./node_modules/@commercetools-frontend/l10n/dist/commercetools-frontend-l10n.esm.js"),g=o("./node_modules/@commercetools-frontend/constants/dist/commercetools-frontend-constants.esm.js"),b=o("./node_modules/@commercetools-frontend/permissions/dist/commercetools-frontend-permissions.esm.js"),C=o("./node_modules/@commercetools-frontend/actions-global/dist/commercetools-frontend-actions-global.esm.js"),k=(0,o("./node_modules/@commercetools-frontend/application-shell/ssr/dist/commercetools-frontend-application-shell-ssr.esm.js").X7)("custom-applications"),j=o("./src/hooks/use-channels-connector/index.js"),D=o("./node_modules/@commercetools-uikit/localized-text-input/dist/commercetools-uikit-localized-text-input.esm.js"),_=function docToFormValues(e,n){var o,a,l,t,s;return{key:null!==(o=null===e||void 0===e?void 0:e.key)&&void 0!==o?o:"",roles:null!==(a=null===e||void 0===e?void 0:e.roles)&&void 0!==a?a:[],venues:null!==(l=null===e||void 0===e?void 0:e.venues)&&void 0!==l?l:[],deliveryCountries:null!==(t=null===e||void 0===e?void 0:e.deliveryCountries)&&void 0!==t?t:[],name:D.Z.createLocalizedString(n,(0,v.sM)(null!==(s=null===e||void 0===e?void 0:e.nameAllLocales)&&void 0!==s?s:[]))}},L=function formValuesToDoc(e){return{key:e.key,roles:e.roles,venues:e.venues,deliveryCountries:e.deliveryCountries,name:D.Z.omitEmptyTranslations(e.name)}},M=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js"),Z=o.n(M),x=o("./node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js"),B=o.n(x),E=o("./node_modules/formik/dist/formik.esm.js"),R=o("./node_modules/@commercetools-uikit/localized-text-field/dist/commercetools-uikit-localized-text-field.esm.js"),w=o("./node_modules/@commercetools-uikit/text-field/dist/commercetools-uikit-text-field.esm.js"),O=o("./node_modules/@commercetools-uikit/select-field/dist/commercetools-uikit-select-field.esm.js"),I={inventorySupply:"InventorySupply",productDistribution:"ProductDistribution",orderExport:"OrderExport",orderImport:"OrderImport",primary:"Primary"},N={atlantis:"Atlantis",atthetop:"Atthetop",ferrariWorld:"FerrariWorld",warnerBros:"WarnerBros"},S={afganistan:"Afganistan",india:"India",france:"France",canada:"Canada"},z={man:"Man",women:"Women",top:"Top",shoes:"Shoes"},T={newshows:"Newshows",oldshoes:"Oldshoes",brandnew:"Brandnew",newarrivals:"Newarrivals"},V=o("./node_modules/@babel/runtime-corejs3/core-js-stable/array/is-array.js"),F=o.n(V),P=o("./node_modules/@commercetools-uikit/text-input/dist/commercetools-uikit-text-input.esm.js"),W=o("./node_modules/omit-empty-es/dist/omit-empty-es.esm.js");const q=function validate(e){var n={key:{},roles:{}};return P.Z.isEmpty(e.key)&&(n.key.missing=!0),F()(e.roles)&&0===e.roles.length&&(n.roles.missing=!0),(0,W.Z)(n)};const A=(0,o("./node_modules/react-intl/lib/index.js").vU)({backToChannelsList:{id:"ChannelDetails.backToChannelsList",defaultMessage:"Back to channels list"},duplicateKey:{id:"ChannelDetails.duplicateKey",defaultMessage:"A channel with this key already exists."},channelUpdated:{id:"ChannelDetails.channelUpdated",defaultMessage:"Channel {channelName} updated"},channelKeyLabel:{id:"ChannelDetails.channelKeyLabel",defaultMessage:"Channel key"},channelNameLabel:{id:"ChannelDetails.channelNameLabel",defaultMessage:"Channel name"},channelRolesLabel:{id:"ChannelDetails.channelRolesLabel",defaultMessage:"Channel roles"},channelVenuesLabel:{id:"ChannelDetails.channelVenuesLabel",defaultMessage:"Venues"},channelDeliveryCountriesLabel:{id:"ChannelDetails.channelDeliveryCountriesLabel",defaultMessage:"DeliveryCountries"},channelCategoryNameLabel:{id:"ChannelDetails.channelCategoryNameLabel",defaultMessage:"CategoryName"},channelCategoryIDLabel:{id:"ChannelDetails.channelCategoryIDLabel",defaultMessage:"CategoryID"},hint:{id:"ChannelDetails.hint",defaultMessage:"This page demonstrates for instance how to use forms, notifications and how to update data using GraphQL, etc."},modalTitle:{id:"ChannelDetails.modalTitle",defaultMessage:"Edit channel"},channelDetailsErrorMessage:{id:"ChannelDetails.errorMessage",defaultMessage:"We were unable to fetch the channel details. Please check your connection, the provided channel ID and try again."}});var K,U,X,G,H,Q=o("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),$=Z()(K=B()(I)).call(K,(function(e){return{label:I[e],value:I[e]}})),J=Z()(U=B()(N)).call(U,(function(e){return{label:N[e],value:N[e]}})),Y=Z()(X=B()(S)).call(X,(function(e){return{label:S[e],value:S[e]}})),ee=Z()(G=B()(z)).call(G,(function(e){return{label:z[e],value:z[e]}})),ne=Z()(H=B()(T)).call(H,(function(e){return{label:T[e],value:T[e]}})),oe=function ChannelDetailsForm(e){var n=(0,i.Z)(),o=(0,E.TA)({initialValues:e.initialValues,onSubmit:e.onSubmit,validate:q,enableReinitialize:!0}),a=(0,Q.BX)(h.Z.Stack,{scale:"l",children:[(0,Q.tZ)(w.Z,{name:"key",title:n.formatMessage(A.channelKeyLabel),value:t()(o).key,errors:o.errors.key,touched:o.touched.key,onChange:o.handleChange,onBlur:o.handleBlur,isReadOnly:e.isReadOnly,renderError:function renderError(e){return"duplicate"===e?n.formatMessage(A.duplicateKey):null},isRequired:!0,horizontalConstraint:10}),(0,Q.tZ)(R.Z,{name:"name",title:n.formatMessage(A.channelNameLabel),value:t()(o).name,errors:o.errors.name,touched:Boolean(o.touched.name),onChange:o.handleChange,onBlur:o.handleBlur,selectedLanguage:e.dataLocale,isReadOnly:e.isReadOnly,horizontalConstraint:10}),(0,Q.tZ)(O.Z,{name:"roles",title:n.formatMessage(A.channelRolesLabel),value:t()(o).roles,errors:o.errors.roles,touched:o.touched.roles,onChange:o.handleChange,onBlur:o.handleBlur,isMulti:!0,options:$,isReadOnly:e.isReadOnly,isRequired:!0,horizontalConstraint:15}),(0,Q.tZ)(O.Z,{name:"venues",title:n.formatMessage(A.channelVenuesLabel),value:t()(o).venues,errors:o.errors.venues,touched:o.touched.venues,onChange:o.handleChange,onBlur:o.handleBlur,isMulti:!0,options:J,isReadOnly:e.isReadOnly,isRequired:!0,horizontalConstraint:10}),(0,Q.tZ)(O.Z,{name:"deliveryCountries",title:n.formatMessage(A.channelDeliveryCountriesLabel),value:t()(o).deliveryCountries,errors:o.errors.deliveryCountries,touched:o.touched.deliveryCountries,onChange:o.handleChange,onBlur:o.handleBlur,isMulti:!0,options:Y,isReadOnly:e.isReadOnly,isRequired:!0,horizontalConstraint:10}),(0,Q.tZ)(O.Z,{name:"categoryName",title:n.formatMessage(A.channelCategoryNameLabel),value:t()(o).categoryName,errors:o.errors.categoryName,touched:o.touched.categoryName,onChange:o.handleChange,onBlur:o.handleBlur,isMulti:!0,options:ee,isReadOnly:e.isReadOnly,isRequired:!0,horizontalConstraint:10}),(0,Q.tZ)(O.Z,{name:"categoryID",title:n.formatMessage(A.channelCategoryIDLabel),value:t()(o).categoryID,errors:o.errors.categoryID,touched:o.touched.categoryID,onChange:o.handleChange,onBlur:o.handleBlur,isMulti:!0,options:ne,isReadOnly:e.isReadOnly,isRequired:!0,horizontalConstraint:10})]});return e.children({formElements:a,values:t()(o),isDirty:o.dirty,isSubmitting:o.isSubmitting,submitForm:o.handleSubmit,handleReset:o.handleReset})};oe.displayName="ChannelDetailsForm";const ae=oe;var le=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/reduce.js"),te=o.n(le),se=function transformErrors(e){var n=F()(e)?e:[e],o=te()(n).call(n,(function(e,n){var o,a,l,t,s=null!==(o=null===n||void 0===n||null===(a=n.extensions)||void 0===a?void 0:a.code)&&void 0!==o?o:n.code,r=null!==(l=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.field)&&void 0!==l?l:n.field;return"DuplicateField"===s?e.formErrors[r]={duplicate:!0}:e.unmappedErrors.push(n),e}),{formErrors:{},unmappedErrors:[]}),a=o.formErrors,l=o.unmappedErrors;return{formErrors:(0,W.Z)(a),unmappedErrors:l}},re=o("./node_modules/@commercetools-frontend/application-shell/dist/commercetools-frontend-application-shell.esm.js"),ie=function ChannelDetails(e){var n=(0,i.Z)(),o=(0,d.UO)(),l=(0,j.wP)(o.id),s=l.loading,D=l.error,M=l.channel,Z=(0,f.UV)((function(e){var n,o,a;return{dataLocale:null!==(n=e.dataLocale)&&void 0!==n?n:"",projectLanguages:null!==(o=null===(a=e.project)||void 0===a?void 0:a.languages)&&void 0!==o?o:[]}})),x=Z.dataLocale,B=Z.projectLanguages,E=(0,b.bk)({demandedPermissions:[k.Manage]}),R=(0,C.E0)(),w=(0,C._F)(),O=(0,j.EE)(),I=(0,y.useCallback)(function(){var e=(0,a.Z)(r().mark((function _callee(e,o){var a,l;return r().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return a=L(e),t.prev=1,t.next=4,O.execute({originalDraft:M,nextDraft:a});case 4:R({kind:"success",domain:g.w7.SIDE,text:n.formatMessage(A.channelUpdated,{channelName:(0,v.Wb)(e,{key:"name",locale:x,fallbackOrder:B})})}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),(l=se(t.t0)).unmappedErrors.length>0&&w({errors:l.unmappedErrors}),o.setErrors(l.formErrors);case 12:case"end":return t.stop()}}),_callee,null,[[1,7]])})));return function(n,o){return e.apply(this,arguments)}}(),[M,O,x,n,B,w,R]);return(0,Q.tZ)(ae,{initialValues:_(M,B),onSubmit:I,isReadOnly:!E,dataLocale:x,children:function children(o){var a,l=(0,v.Wb)({name:null===(a=t()(o))||void 0===a?void 0:a.name},{key:"name",locale:x,fallbackOrder:B,fallback:g.xL});return(0,Q.BX)(c.ck,{title:l,isOpen:!0,onClose:e.onClose,isPrimaryButtonDisabled:o.isSubmitting||!o.isDirty||!E,isSecondaryButtonDisabled:!o.isDirty,onSecondaryButtonClick:o.handleReset,onPrimaryButtonClick:o.submitForm,labelPrimaryButton:c.ck.Intl.save,labelSecondaryButton:c.ck.Intl.revert,children:[s&&(0,Q.tZ)(h.Z.Stack,{alignItems:"center",children:(0,Q.tZ)(p.Z,{})}),D&&(0,Q.tZ)(u.I,{type:"error",children:(0,Q.tZ)(m.Z.Body,{children:n.formatMessage(A.channelDetailsErrorMessage)})}),M&&o.formElements,M&&(0,Q.tZ)(re.H4,{additionalParts:[l]}),null===M&&(0,Q.tZ)(c.uW,{})]})}})};ie.displayName="ChannelDetails";const de=ie}}]);
//# sourceMappingURL=7636.7636.728c7ef4f5e93ac2f645.js.map